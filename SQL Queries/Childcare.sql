CREATE TABLE PARENTS ( 
SSN CHAR (9) NOT NULL, FNAME VARCHAR (50) NOT NULL, 
LNAME VARCHAR (50), DOB DATE, 
EMAIL VARCHAR (10), 
CONTACTNO CHAR (10), 
ADDRESS VARCHAR (30), ZIPCODE CHAR (5), 
PRIMARY KEY(SSN) 
); 

CREATE TABLE TOY ( 
T_ID INT NOT NULL, 
TOY_NAME VARCHAR (20), 
DATE_OF_PURCHASE DATE, 
COMPANY VARCHAR (10), 
TOTAL_QUANTITY INT, 
PRIMARY KEY(T_ID) 
); 

CREATE TABLE FOODS ( 
F_ID INT NOT NULL, 
FOOD_NAME VARCHAR (20), 
PRICE INT, 
QUANTITY INT, 
PRIMARY KEY(F_ID) 
); 

CREATE TABLE JOB ( 
JOB_ID INT NOT NULL, 
BASIC_SALARY INT, 
PRIMARY KEY(JOB_ID) 
); 

CREATE TABLE DEPARTMENT_S ( 
DEPT_ID INT NOT NULL, 
DEPT_NAME VARCHAR (20), 
MGR_SSN CHAR (9), 
PRIMARY KEY(DEPT_ID) 
);

CREATE TABLE CARETAKERS ( 
CSSN CHAR (9) NOT NULL, 
FNAME VARCHAR (50) NOT NULL, 
LNAME VARCHAR (50), 
DOB DATE, 
EMAIL VARCHAR (30), 
CONTACTNO CHAR (10), 
JOBTYPE CHAR (1), 
SUBJECT VARCHAR (20), 
JOB_ID INT, 
MGR_SSN CHAR (9), 
DEPT_ID INT, 
PRIMARY KEY(CSSN), 
FOREIGN KEY (JOB_ID) REFERENCES JOB(JOB_ID), 
FOREIGN KEY (DEPT_ID) REFERENCES DEPARTMENT_S(DEPT_ID) 
); 

ALTER TABLE CARETAKERS ADD CONSTRAINT SUPERVISOR_KEY FOREIGN KEY (MGR_SSN) REFERENCES CARETAKERS(CSSN); 
ALTER TABLE DEPARTMENT_S ADD CONSTRAINT MGR_KEY FOREIGN KEY (MGR_SSN) REFERENCES CARETAKER(CSSN); 


CREATE TABLE CARETAKER ( 
CSSN CHAR (9) NOT NULL, 
FNAME VARCHAR (50) NOT NULL, 
LNAME VARCHAR (50), 
DOB DATE, 
EMAIL VARCHAR (10), 
CONTACTNO CHAR (10), 
JOBTYPE CHAR (1), 
SUBJECT VARCHAR (20), 
JOB_ID INT, 
MGR_SSN CHAR (9), 
DEPT_ID INT, 
PRIMARY KEY(CSSN), 
FOREIGN KEY (JOB_ID) REFERENCES JOB(JOB_ID), 
FOREIGN KEY (DEPT_ID) REFERENCES DEPARTMENT_S(DEPT_ID) 
); 

CREATE TABLE CLASSSECTIONS ( 
CLASS_ID INT NOT NULL, 
ROOM VARCHAR (10), 
LOCATION VARCHAR (20), 
CLASS_TEACHER CHAR (9), 
PRIMARY KEY(CLASS_ID), 
FOREIGN KEY (CLASS_TEACHER) REFERENCES CARETAKERS(CSSN) 
);

CREATE TABLE CHILDREN ( 
CHILD_ID INT NOT NULL, 
FNAME VARCHAR (50) NOT NULL, 
LNAME VARCHAR (50), 
DOB DATE, ENAME VARCHAR (10), EPHONENO CHAR (10), 
PSSN CHAR (9), 
CLASS INT, 
PRIMARY KEY (CHILD_ID), 
FOREIGN KEY (PSSN) REFERENCES PARENTS(SSN), 
FOREIGN KEY (CLASS) REFERENCES CLASSSECTIONS(CLASS_ID) 
);

CREATE TABLE TOYS_DISTRIBUTION ( 
TOY_ID INT NOT NULL, 
CLASS_ID INT NOT NULL, 
QUANTITY INT, 
FOREIGN KEY (TOY_ID) REFERENCES TOY(T_ID), 
FOREIGN KEY (CLASS_ID) REFERENCES CLASSSECTIONS(CLASS_ID) 
); 

CREATE TABLE TUITION_PAYMENTS ( 
PAYMENT_ID INT NOT NULL, 
PAYMENT_TYPE VARCHAR (20) NOT NULL, 
PAYMENT_DATE DATE, AMOUNT INT, 
CHILD_ID INT, 
PRIMARY KEY(PAYMENT_ID), 
FOREIGN KEY (CHILD_ID) REFERENCES CHILDREN(CHILD_ID) 
); 

CREATE TABLE TIMINGS ( 
TIME_ID INT NOT NULL, 
CSSN CHAR (9) NOT NULL, 
TIMEIN TIMESTAMP, 
TIMEOUT TIMESTAMP, 
PRIMARY KEY(TIME_ID), 
FOREIGN KEY (CSSN) REFERENCES CARETAKERS(CSSN)); 

CREATE TABLE FOODORDERBY ( 
STAFFSSN CHAR (9) NOT NULL, 
FOOD_ID INT NOT NULL, 
DATEORDERED DATE, 
FOREIGN KEY (STAFFSSN) REFERENCES CARETAKERS(CSSN), 
FOREIGN KEY (FOOD_ID) REFERENCES FOODS(F_ID) 
); 

CREATE TABLE FOODRECORDS ( 
CHILD_ID INT NOT NULL, 
FOOD_ID INT NOT NULL, 
PRIMARY KEY (CHILD_ID, FOOD_ID), 
FOREIGN KEY (CHILD_ID) REFERENCES CHILDREN(CHILD_ID), 
FOREIGN KEY (FOOD_ID) REFERENCES FOODS(F_ID) 
);

CREATE TABLE SALARYCOMPUTATIONS ( 
CARETAKERSSN CHAR (9) NOT NULL, TIMINGID INT NOT NULL, 
JOBID INT NOT NULL, SALARY INT, 
PRIMARY KEY (CARETAKERSSN, TIMINGID, JOBID), 
FOREIGN KEY (CARETAKERSSN) REFERENCES CARETAKERS(CSSN), 
FOREIGN KEY (TIMINGID) REFERENCES TIMINGS(TIME_ID), 
FOREIGN KEY (JOBID) REFERENCES JOB(JOB_ID) 
);

INSERT INTO caretakers (CSSN, FNAME, LNAME, DOB, EMAIL, CONTACTNO, JOBTYPE, SUBJECT, JOB_ID, MGR_SSN, DEPT_ID) VALUES
('677777771', 'Jeniffer', 'Ramos', to_date('1980-04-02', 'yyyy/mm/dd'), 'Jeni.Ramos@gmail.com', '1111111123', 'T', 'Game', 1, '677777772', 1);

INSERT INTO foods (F_ID, FOOD_NAME, PRICE, QUANTITY) VALUES
(1, 'Chocolates', 5, 10);
INSERT INTO foods (F_ID, FOOD_NAME, PRICE, QUANTITY) VALUES
(2, 'Pizza', 52, 12);
INSERT INTO foods (F_ID, FOOD_NAME, PRICE, QUANTITY) VALUES
(3, 'Sandwich', 2, 40);
INSERT INTO foods (F_ID, FOOD_NAME, PRICE, QUANTITY) VALUES
(4, 'Burger', 5, 12);

('677777772', 'Julia', 'Alexander', NULL, 'Julia@gmail.com', '1111111143', 'M', NULL, 1, NULL, 1),
('677777773', 'Katrina', 'Schroder', to_date('1983-04-02', 'yyyy/mm/dd'), 'Katrina@gmail.com', '1111111133', 'M', NULL, 2, '677777774', 2),
('677777774', 'Rose', 'William', to_date('1985-04-02', 'yyyy/mm/dd'), 'Rose@gmail.com', '1111111154', 'M', NULL, 2, NULL, 2),
('677777775', 'Lisaa', 'Tylor', to_date('2000-04-02', 'yyyy/mm/dd'), 'lissa@gmail.com', '1111111125', 'T', 'English', 1, '677777771', 1),
('677777776', 'Aisha', 'Beiber', to_date('1999-04-02', 'yyyy/mm/dd'), 'Aisha@gmail.com', '1111111126', 'T', 'English', 1, '677777771', 1),
('677777777', 'Sonam', 'Sen', to_date('1991-04-10', 'yyyy/mm/dd'), ' Sonam@gmail.com', '1111111199', 'M', NULL, 2, '677777773', 2);

INSERT INTO child (CHILD_ID, FNAME, LNAME, DOB, ENAME, EPHONENO, PSSN, CLASS) VALUES
(1, 'Alexa', 'William', to_date('2015-04-02', 'yyyy/mm/dd'), 'Michael', '1111111111', '777777771', 1);

Alter table parents modify EMAIL VARCHAR (30);

INSERT INTO parents (SSN, FNAME, LNAME, DOB, EMAIL, CONTACTNO, ADDRESS, ZIPCODE) VALUES
('777777102', 'Hyde', 'Victor', to_date('1998-04-12', 'yyyy/mm/dd'), 'Hyde@gmail.com', '321654932', '1234 fshteh', '32178');

INSERT INTO parents (SSN, FNAME, LNAME, DOB, EMAIL, CONTACTNO, ADDRESS, ZIPCODE) VALUES
('777777104', 'zfdsg', 'asf', to_date('1979-04-02', 'yyyy/mm/dd'), 'asf@gmail.com', '987326544', '123 sdfg', '65432');

INSERT INTO parents (SSN, FNAME, LNAME, DOB, EMAIL, CONTACTNO, ADDRESS, ZIPCODE) VALUES
('777777771', 'Amin', 'William', to_date('2015-04-05', 'yyyy/mm/dd'), 'amin@gmail.com', '1111111111', '777777771', '1');

INSERT INTO parents (SSN, FNAME, LNAME, DOB, EMAIL, CONTACTNO, ADDRESS, ZIPCODE) VALUES
('777777772', 'Bill', 'Ryne', to_date('1985-09-06', 'yyyy/mm/dd'), 'b@gmail.com', '3111111111', '232, James Blvd', '75080');

INSERT INTO parents (SSN, FNAME, LNAME, DOB, EMAIL, CONTACTNO, ADDRESS, ZIPCODE) VALUES
('777777773', 'qwe', 'wer', to_date('1985-04-17', 'yyyy/mm/dd'), 'qwe@gmail.com', '3111113232', '32, James Blvd', '12345');

INSERT INTO parents (SSN, FNAME, LNAME, DOB, EMAIL, CONTACTNO, ADDRESS, ZIPCODE) VALUES
('777777774', 'asd', 'sdf', to_date('1980-04-20', 'yyyy/mm/dd'), 'asd@gmail.com', '12', '12,dsdfs', '12345');

INSERT INTO parents (SSN, FNAME, LNAME, DOB, EMAIL, CONTACTNO, ADDRESS, ZIPCODE) VALUES
('777777775', 'zxc', 'xcv', to_date('1990-04-02', 'yyyy/mm/dd'), 'xcv@gmail.com', '123456987', '64 dsfse', '78945');

INSERT INTO parents (SSN, FNAME, LNAME, DOB, EMAIL, CONTACTNO, ADDRESS, ZIPCODE) VALUES
('777777776', 'gfdf', 'dsfd', NULL, 'dgd@vdgd.com', '363453567', '123 amanda ', '24554');

INSERT INTO parents (SSN, FNAME, LNAME, DOB, EMAIL, CONTACTNO, ADDRESS, ZIPCODE) VALUES
('777777777', 'mnb', 'vbnn', to_date('1991-04-03', 'yyyy/mm/dd'), 'ssf@csd.com', '3231441343', 'xvsfdgs', '65555');



INSERT INTO parents (SSN, FNAME, LNAME, DOB, EMAIL, CONTACTNO, ADDRESS, ZIPCODE) VALUES
('777777778', 'dsfs', 'sf', to_date('1988-04-02', 'yyyy/mm/dd'), 'vdgg@sad.com', '12345', '6543 Eve', '75395');
INSERT INTO parents (SSN, FNAME, LNAME, DOB, EMAIL, CONTACTNO, ADDRESS, ZIPCODE) VALUES
('777777779', 'sdfdg', 'sdsf', to_date('1985-04-03', 'yyyy/mm/dd'), 'cdsg@gmail.com', 'sfsr', '123 qwerty eve', '54245');


INSERT INTO department_s (DEPT_ID, DEPT_NAME, MGR_SSN) VALUES
(1, 'Teaching', '677777772');

(2, 'Management', '677777774');

INSERT INTO caretakers (`CSSN`, `FNAME`, `LNAME`, `DOB`, `EMAIL`, `CONTACTNO`, `JOBTYPE`, `SUBJECT`, `JOB_ID`, `MGR_SSN`, `DEPT_ID`) VALUES
('677777771', 'Jeniffer', 'Ramos', '1980-04-02', 'Jeni.Ramos@gmail.com', '1111111123', 'T', 'Game', 1, '677777772', 1),
('677777772', 'Julia', 'Alexander', NULL, 'Julia@gmail.com', '1111111143', 'M', NULL, 1, NULL, 1),
('677777773', 'Katrina', 'Schroder', '1983-04-02', 'Katrina@gmail.com', '1111111133', 'M', NULL, 2, '677777774', 2),
('677777774', 'Rose', 'William', '1985-04-02', 'Rose@gmail.com', '1111111154', 'M', NULL, 2, NULL, 2),
('677777775', 'Lisaa', 'Tylor', '2000-04-02', 'lissa@gmail.com', '1111111125', 'T', 'English', 1, '677777771', 1),
('677777776', 'Aisha', 'Beiber', '1999-04-02', 'Aisha@gmail.com', '1111111126', 'T', 'English', 1, '677777771', 1),
('677777777', 'Sonam', 'Sen', '1991-04-10', ' Sonam@gmail.com', '1111111199', 'M', NULL, 2, '677777773', 2);

INSERT INTO toy (T_ID, TOY_NAME, DATE_OF_PURCHASE, COMPANY, TOTAL_QUANTITY) VALUES
(1, ' Electric Car', to_date('2014-03-07', 'yyyy/mm/dd'), 'ABC', 100);
INSERT INTO toy (T_ID, TOY_NAME, DATE_OF_PURCHASE, COMPANY, TOTAL_QUANTITY) VALUES
(2, 'Doll', to_date('2016-04-05', 'yyyy/mm/dd'), 'ABC', 10);
INSERT INTO toy (T_ID, TOY_NAME, DATE_OF_PURCHASE, COMPANY, TOTAL_QUANTITY) VALUES
(3, 'Frisbee', to_date('2015-04-24', 'yyyy/mm/dd'), 'XYZ', 20);

INSERT INTO job (JOB_ID, BASIC_SALARY) VALUES
(1, 18);
INSERT INTO job (JOB_ID, BASIC_SALARY) VALUES
(2, 15);

ALTER TABLE CARETAKERS ADD CONSTRAINT SUPERVISOR_KEY FOREIGN KEY (MGR_SSN) REFERENCES CARETAKERS(CSSN); 
INSERT INTO department_s (DEPT_ID, DEPT_NAME, MGR_SSN) VALUES
(1, 'Mentoring', '677777772');
(2, 'Management', '677777774');

ALTER TABLE DEPARTMENT_S ADD CONSTRAINT MGR_KEY FOREIGN KEY (MGR_SSN) REFERENCES CARETAKER(CSSN);











CREATE OR REPLACE TRIGGER TOYS_UPDATE 
AFTER INSERT ON TOYS_DISTRIBUTION 
FOR EACH ROW 
BEGIN   
UPDATE TOYS SET TOTAL_QUANTITY = TOTAL_QUANTITY - NEW.QUANTITY WHERE T_ID=NEW.TOY_ID; 
END;